<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="jakarta.faces.html"
      xmlns:f="jakarta.faces.core"
      xmlns:ui="jakarta.faces.facelets"
      xmlns:p="http://primefaces.org/ui">
<f:view>
    <h:head>
        <title>Registrar Mascota</title>
        <meta charset="UTF-8" />
        <style>
            body {
                margin: 0;
                font-family: "Segoe UI", sans-serif;
                background-color: #cfe7b6;
                display: flex;
                justify-content: center;
                align-items: center;
                flex-direction: column;
                margin-top: 40px;
                margin-bottom: 40px;
            }

            .main-wrapper {
                display: flex;
                gap: 40px;
                background-color: white;
                padding: 30px 40px;
                border-radius: 20px;
                box-shadow: 8px 8px 0 #b8d7a4;
            }

            .form-container {
                width: 60vw;
            }

            h2 {
                text-align: center;
                margin-bottom: 25px;
                color: #7fa450;
                font-size: 22px;
            }

            label {
                display: block;
                margin-bottom: 6px;
                font-weight: bold;
                color: #555;
            }

            .column-block {
                display: flex;
                flex-direction: column;
                gap: 0.3rem;
            }

            div[style*="grid-template-columns"] {
                gap: 1.2rem; /* Reduce la separación entre columnas */
            }

            h3, .section-title {
                text-align: left;
                font-size: 17px;
                margin: 1px 0 5px 0;
                color: #333;
                font-weight: 600;
            }

        .login-btn {
                width: 100%;
                padding: 12px;
                background-color: #cfe7b6;
                color: black;
                border: none;
                border-radius: 12px;
                font-size: 16px;
                font-weight: bold;
                cursor: pointer;
                margin-top: 10px;
            }

            .login-btn:hover {
                background-color: #b8d7a4;
            }
            .form-grid {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 2.5rem; /* Ajustar aquí la separación entre columnas*/
            }
        </style>
    </h:head>
    <h:body>

        <!-- Mensajes fuera de formularios -->
        <p:growl id="growl" showDetail="true" autoUpdate="true" />

        <div class="main-wrapper">

            <!-- FORMULARIO MASCOTA -->
            <div class="form-container">
                <h2>Registrar Nueva Mascota</h2>
                <h:form id="registroForm" style="max-width: 1100px; margin:auto;">
                    <p:growl id="growl" showDetail="true" autoUpdate="true" />

                    <h2 style="text-align:center;">Registrar Nueva Mascota y Cliente</h2>

                    <!-- Contenedor general en dos columnas -->
                    <div class="form-grid">

                        <!-- Columna 1: Mascota -->
                        <div class="column-block" style="display: flex; flex-direction: column;">
                            <h3 class="section-title">Mascota</h3>
                            <p:selectOneMenu id="mascotas" value="#{registrarMascotaBean.mascotaSeleccionadaID}"
                                             requiredMessage="Seleccione mascota registrada" style="width: 100%;">
                                <f:selectItem itemLabel="Seleccione una mascota" itemValue="#{null}" />
                                <f:selectItems value="#{registrarMascotaBean.mascotas}" var="mas"
                                               itemLabel="#{mas.nombre}" itemValue="#{mas.id}" />
                                <p:ajax event="change" listener="#{registrarMascotaBean.cargarDatosMascota}"
                                        update="nombre especie raza edad peso complexion" />
                            </p:selectOneMenu>
                            <p:message for="empleado" />
                            <h3>Nombre de la Mascota</h3>
                            <p:inputText id="nombre" value="#{registrarMascotaBean.nombreMascota}"
                                         placeholder="Nombre de la Mascota"
                                         required="true" requiredMessage="El nombre es obligatorio" style="width: 100%;" />
                            <p:message for="nombre" />
                            <h3>Especie</h3>
                            <p:inputText id="especie" value="#{registrarMascotaBean.especie}"
                                         placeholder="Ej. perro, gato, etc."
                                         required="true" requiredMessage="La especie es obligatoria" style="width: 100%;" />
                            <p:message for="especie" />
                            <h3>Raza</h3>
                            <p:inputText id="raza" value="#{registrarMascotaBean.raza}"
                                         placeholder="Golden/Persa/No conozco"
                                         required="true" requiredMessage="La raza es obligatoria" style="width: 100%;" />
                            <p:message for="raza" />

                                <h:outputLabel for="edad" value="Fecha de nacimiento" />
                                <p:datePicker id="edad" value="#{registrarMascotaBean.edad}" pattern="yyyy-MM-dd" showIcon="true"
                                              required="true" requiredMessage="La fecha de nacimiento es obligatoria"
                                              style="width: 100%;" />
                                <p:message for="edad" />

                            <h3>Peso</h3>
                            <p:inputNumber id="peso" value="#{registrarMascotaBean.peso}" decimalPlaces="2" decimalSeparator="." emptyValue="null"
                                           symbol=" kg" placeholder="Ej. 12.5" required="true"
                                           requiredMessage="El peso es obligatorio" style="width: 100%;" />
                            <p:message for="peso" />

                            <h3>Habitacion</h3>
                                <p:selectOneMenu id="habitacion" value="#{registrarMascotaBean.habitacionSeleccionadaID}" required="true"
                                                 style="width: 100%;" requiredMessage="Debe seleccionar una habitación">
                                    <f:selectItem itemLabel="Seleccione una habitación" itemValue="#{null}" />
                                    <f:selectItems value="#{registrarMascotaBean.obtenerHabitacionesDisponibles()}" var="hab"
                                                   itemLabel="Habitación: #{hab.id}" itemValue="#{hab.id}" />
                                </p:selectOneMenu>
                                <p:message for="habitacion" />


                            <h3>Complexion</h3>
                                <p:selectOneMenu id="complexion" value="#{registrarMascotaBean.complexion}" required="true"
                                                 requiredMessage="Seleccione una complexión" style="width: 100%;">
                                    <f:selectItem itemLabel="Seleccione complexión" itemValue="#{null}" />
                                    <f:selectItems value="#{registrarMascotaBean.listaComplexiones}" var="c"
                                                   itemValue="#{c}" itemLabel="#{c}" />
                                </p:selectOneMenu>
                                <p:message for="complexion" />


                            <h3>Empleado</h3>
                                <p:selectOneMenu id="empleado" value="#{registrarMascotaBean.empleadoAsignadoID}" required="true"
                                                 requiredMessage="Seleccione un empleado" style="width: 100%;">
                                    <f:selectItem itemLabel="Seleccione un empleado" itemValue="#{null}" />
                                    <f:selectItems value="#{registrarMascotaBean.obtenerEmpleados()}" var="emp"
                                                   itemLabel="#{emp.userName}" itemValue="#{emp.id}" />
                                </p:selectOneMenu>
                                <p:message for="empleado" />

                        </div>

                        <!-- Columna 2: Cliente -->
                        <div class="column-block" style="display: flex; flex-direction: column;">
                            <h3 class="section-title">Cliente</h3>
                            <p:selectOneMenu id="clientes" value="#{registrarMascotaBean.clienteSeleccionadaID}"
                                             requiredMessage="Seleccione cliente registrado" style="width: 100%;">
                                <f:selectItem itemLabel="Seleccione una cliente" itemValue="#{null}" />
                                <f:selectItems value="#{registrarMascotaBean.propietarios}" var="cl"
                                               itemLabel="#{cl.nombre}" itemValue="#{cl.id}" />
                                <p:ajax event="change" listener="#{registrarMascotaBean.cargarDatosCliente()}"
                                        update="clienteNombre telefono direccion" />
                            </p:selectOneMenu>
                            <h3>Nombre</h3>
                            <p:inputText id="clienteNombre" value="#{registrarMascotaBean.nombreCliente}"
                                         placeholder="Jessenia Fuentes"
                                         required="true" requiredMessage="Nombre del cliente requerido" style="width: 100%;" />
                            <p:message for="clienteNombre" />
                            <h3>Telefono</h3>
                            <p:inputText id="telefono" value="#{registrarMascotaBean.telefono}"
                                         placeholder="0999999999"
                                         required="true" requiredMessage="Teléfono requerido" style="width: 100%;" />
                            <p:message for="telefono" />
                            <h3>Direccion</h3>
                            <p:inputTextarea id="direccion" value="#{registrarMascotaBean.direccion}" rows="3"
                                             placeholder="Dirección (Ej. Calle 123, ciudad)"
                                             required="true" requiredMessage="Dirección requerida" style="width: 100%;" />
                            <p:message for="direccion" />
                            <h3>Opciones de Servicios</h3>
                            <p:selectManyCheckbox id="opcionesServicios"
                                                  value="#{registrarMascotaBean.seleccionCheckbox}"
                                                  layout="pageDirection" columns="2" style="width:100%">

                                <f:selectItems value="#{registrarMascotaBean.opcionesCheckbox}" />

                            </p:selectManyCheckbox>

                            <p:message for="opcionesServicios" />
                        </div>
                    </div>

                    <!-- Botón único centrado -->
                    <div style="text-align: center; margin-top: 2rem;">
                        <p:commandButton value="Registrar" icon="pi pi-check"
                                         action="#{registrarMascotaBean.registrarMascota()}"
                                         update="@form" process="@form"
                                         onstart="if(!confirm('¿Confirmar registro?')) return false;"
                                         styleClass="login-btn" />
                    </div>
                </h:form>


            </div>
        </div>
    </h:body>
</f:view>
</html>
